<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Barnehagefakta til openstreetmap : Data for import/fletting av barnehageinformasjon til openstreetmap">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/leaflet.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Barnehagefakta til openstreetmap {{title}}</title>
  </head>

  <body>

    <script src='https://api.mapbox.com/mapbox.js/v2.2.2/mapbox.js'></script>
    <!-- For ajax call -->
    <script src='https://code.jquery.com/jquery-1.11.0.min.js'></script>
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-osm/v0.1.0/leaflet-osm.js'></script>

    <script>
    function create_map(name, lat, lon, osm_id) {
	L.mapbox.accessToken = 'pk.eyJ1Ijoib2J0aXR1cyIsImEiOiJjaWYzbXF1M3IwMGtuc3ZsdmhhYXR4d2hpIn0.tQQLwWt3e_NhGtTdUYLzwQ'
	var map = L.mapbox.map(name, 'obtitus.00ebefa1');
	map.setView([lat, lon], 17);

	// Highlight osm object, does not align correctly
	// uses the overpass xml:
	// if ((typeof osm_xml !== 'undefined') && (osm_xml !== null)) {
	//     var layer = new L.OSM.DataLayer(osm_xml).addTo(map);
	// }
	
	if ((typeof osm_id !== 'undefined') && (osm_id !== null)) {
	    $.ajax({
		url: "https://www.openstreetmap.org/api/0.6/" + osm_id,
		dataType: "xml",
		success: function (xml) {
		    var layer = new L.OSM.DataLayer(xml).addTo(map);
		    map.fitBounds(layer.getBounds());
		    map.setZoom(17); // doesn't seem to do anything...
		}
	    });
	}
    }
    </script>
    

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/obtitus/barnehagefakta_osm_data">View on GitHub</a>

	  <h1 id="project_title">Barnehagefakta til openstreetmap</h1>
          <h2 id="project_tagline">Barnehagefakta til openstreetmap : Data for import/fletting av barnehageinformasjon til openstreetmap</h2>

	  <a href="index.html" title="Tilbake til kommuneoversikt">
            <section id="back">
              Tilbake til kommuneoversikt
            </section>
	  </a>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
	  {{title}}
	</h1>
	{{info}}

  <table> <!--  class="layout display responsive-table" -->
    <thead>
        <tr>
            <th>Navn</th>
            <th>Tags fra NBR</th>
            <th>Tags fra OSM</th>	    
	    <th>Linker</th>
	    <th>Kart</th>
        </tr>
    </thead>
    <tbody>
    {%- for row in table %}
    <tr>
      {%- for column in row %}
      <td>{{ column }}</td>
      {%- endfor %}
    </tr>
    {%- endfor %}
  </table>
  
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">This page is maintained by <a href="https://github.com/obtitus">obtitus</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>	
        <p class="copyright">Map data &copy;<a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>	
	</p>
	<p class="copyright">NBR data &copy;<a href="http://data.udir.no/baf/">Nasjonalt barnehageregister</a>, <a href="http://data.norge.no/nlod/en/1.0">NLOD</a>	
	</p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-2401814-5");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

    

  </body>
</html>
